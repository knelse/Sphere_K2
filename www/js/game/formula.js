// formula.js
var CFormula = function() {
	var HP_PER_TITLE = new Array(100,150,200,250,300,350,400,450,500,550,600,650,700,750,800,850,900,950,1000,1050,1100,1150,1200,1250,1300,1350,1400,1450,1500,1550,1600,1650,1700,1750,1800,1850,1900,1950,2000,2050,2100,2150,2200,2250,2300,2350,2400,2450,2500,2550,2600,2650,2700,2750,2800,2850,2900,2950,3000,3200),HP_PER_DEGREE = new Array(100,110,120,130,150,160,170,180,190,210,220,230,240,250,270,280,290,300,310,330,340,350,360,370,390,400,410,420,430,450,460,470,480,490,510,520,530,540,550,570,580,590,600,610,630,640,650,660,670,690,700,710,720,730,750,760,770,780,790,800),MP_PER_DEGREE = new Array(100,175,250,325,400,475,550,625,700,775,850,925,1000,1075,1150,1225,1300,1375,1450,1525,1600,1675,1750,1825,1900,1975,2050,2125,2200,2275,2350,2425,2500,2575,2650,2725,2800,2875,2950,3025,3100,3175,3250,3325,3400,3475,3550,3625,3700,3775,3850,3925,4000,4075,4150,4225,4300,4375,4450,4650),MP_PER_TITLE = new Array(100,100,100,100,125,125,125,125,125,150,150,150,150,150,175,175,175,175,175,200,200,200,200,200,225,225,225,225,225,250,250,250,250,250,275,275,275,275,275,300,300,300,300,300,325,325,325,325,325,350,350,350,350,350,375,375,375,375,375,400),ELEMENTS_PRIMARY = new Array(4,8,12,16,22,28,34,40,46,54,62,70,78,86,94,102,110,118,126,136,146,156,166,176,186,196,206,216,226,238,250,262,274,286,298,310,322,334,346,360,374,388,402,416,430,444,458,472,486,502,518,534,550,566,582,598,614,632,650,670),ELEMENTS_SECONDARY = new Array(0,0,0,0,1,1,1,1,1,2,2,2,2,2,4,4,4,4,4,6,6,6,6,6,10,10,10,10,10,14,14,14,14,14,20,20,20,20,20,26,26,26,26,26,34,34,34,34,34,42,42,42,42,42,52,52,52,52,52,62),ELEMENTS_GREAT = new Array(0,1,2,3,4,6,7,8,9,10,12,13,14,15,16,18,19,20,21,22,24,25,26,27,28,30,31,32,33,34,36,37,38,39,40,42,43,44,45,46,48,49,50,51,52,54,55,56,57,58,60,61,62,63,64,66,67,68,69,70);
// + methods to use these constants

	this.getHp = function( title, degree ) { return HP_PER_TITLE[ ( title - 1 ) % 60] + HP_PER_DEGREE[ ( degree - 1 ) % 60] - 100; }
	this.getMp = function( degree, title ) { return MP_PER_DEGREE[ ( degree - 1 ) % 60 ] + MP_PER_TITLE[ ( title - 1 ) % 60 ] - 100; }
	
	this.getMaxElements = function( title, degree ) 
	{
		var titleGreat = title > 120 ? ( title > 180 ? 3 : 2 ) : (  title > 60 ? 1 : 0 );
		var degreeGreat = degree > 120 ? ( degree > 180 ? 3 : 2 ) : (  degree > 60 ? 1 : 0 );		
		var titleBase = ( title - 1 ) % 60;
		var degreeBase = ( degree - 1 ) % 60;
		var titleElements = ELEMENTS_PRIMARY[ titleBase ] + ELEMENTS_SECONDARY[ degreeBase ] + titleGreat * ELEMENTS_GREAT[ titleBase ];
		var degreeElements = ELEMENTS_PRIMARY[ degreeBase ] + ELEMENTS_SECONDARY[ titleBase ] + degreeGreat * ELEMENTS_GREAT[ degreeBase ];		
		return [ titleElements, degreeElements ];
	}

	this.getExpForLevel = function( title, degree )
{
	var base_exp = new Array( 50, 320, 1080, 2880, 7000, 10800, 15680, 22080, 29570, 39500, 50820, 64800, 81120, 100940, 123750, 151040, 182070, 218700, 259920, 310000, 363800, 428300, 499900, 584600, 678100, 784200, 904000, 1038800, 1194200, 1368000, 1561600, 1781800, 2025500, 2300400, 2609300, 2954900, 3340400, 3768800, 4251200, 4808000, 5430000, 6121000, 6897000, 7763000, 8809000, 9988000, 11321000, 12810000, 14478000, 16513000, 18805000, 21416000, 24354000, 27687000, 33895000, 41458000, 50684000, 61931000, 75607000, 92268000 );
	var delta_exp = new Array( 0, 40, 90, 180, 350, 450, 560, 690, 821.2, 987.4, 1155, 1350, 1560, 1802.5, 2062.5, 2360, 2677.5, 3037.5, 3420, 3875, 5067.2, 6521.9, 8204.9, 10230.5, 12544.8, 15231.6, 18331.1, 21889, 26045.9, 30780, 36143.5, 42317.7, 49256.5, 57171.7, 66164.4, 76334.9, 87798.4, 100666.6, 115272.9, 132220, 151311.6, 172699.7, 196885.3, 224068.4, 256929.2, 294211.7, 336619.1, 384300, 438033.4, 503646.5, 577977.2, 663072.4, 759339.3, 869064.2, 1070773.9, 1317772.2, 1620554.1, 1991402, 2444412.8, 2998709.8 );

	title = 1 + ( title - 1 ) % 60;
	degree = 1 + ( degree - 1 ) % 60;
	var lmax = Math.max( title, degree );
	var lmin = Math.min( degree, title);
	if ( (title == 60 ) && (degree == 60) )
		return 1;

  return Math.floor(base_exp[lmax - 1] + delta_exp[lmax - 1] * (lmin - 1 ));
}


}